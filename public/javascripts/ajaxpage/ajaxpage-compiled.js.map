{"version":3,"sources":["ajaxpage.js"],"names":[],"mappings":"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","file":"ajaxpage-compiled.js","sourcesContent":["/*\r\n # By 柯德华;\r\n # Date 2015.6;\r\n # ajax分页插件，\r\n # 基于 page.js添加了一些更符合实际业务的功能，感谢 网友谢亮的分享 http://www.jq-school.com/Detail.aspx?id=267\r\n */\r\n;(function ($) {\r\n    var ajaxPage = function (options) {\r\n        var options = $.extend({\r\n            type: \"get\",\r\n            page: 1,\t\t//当前页\r\n            pageSize: 10,\t\t//每页多少个\r\n            url: null, //后端 url, {page} 为当前页, 可以为伪静态如:  xl_{page}.html\r\n            run: false,\t//是否开始加载\r\n            /*\t\t\tbeforeSend\t\t: true,\t//请求前调用\r\n             complete\t\t: true,\t//请求后调用*/\r\n            pageId: null, \t//分页容器\r\n            noData: \"\\u6CA1\\u6709\\u627E\\u5230\",\t//没有数据时提示\r\n            //content\t\t\t: null,\t\t//处理内容的循环,如 function () { return [list]标签是:{title},内容:{content}[/list] }\r\n            success: null,     //成功时的回调函数\r\n            data: {},\t\t//传递到后台的数据\r\n            global: true,\t\t//是否触发全局的ajax事件\r\n            /*\r\n             以上为对外接口;\r\n             return obj.run();//运行\r\n             return obj.get(i);//跳页\r\n             */\r\n            pageCount: null,\t\t//总页\r\n            recordCount: null,\t\t//总条数\r\n            isLoad: false,\t//是否加载过\r\n            mark: true\t\t//请求开关, true可请求, false不可\r\n        }, options || {});\r\n\r\n        var self = this;\r\n\r\n        if (!self.length || !options.url) {\r\n            return self\r\n        }\r\n        var ajaxPage = {};\r\n\r\n        ajaxPage.r = function (tmplobj, opt) {\r\n            //使用 模板技术生成HTML  obj代表的是 HTML模板数据，opt代表的是json数据\r\n            var htmlstr = tmplobj.tmpl(opt);\r\n\r\n            //console.log(htmlstr);\r\n            return htmlstr;\r\n        }\r\n\r\n        ajaxPage.run = function () {\r\n            if (options.isLoad) {\r\n                return self;\r\n            }\r\n            options.isLoad = true;\r\n            ajaxPage.ajax();\r\n            return self;\r\n        }\r\n\r\n        ajaxPage.ajax = function () {\r\n            if (!options.isLoad) {\r\n                return self;\r\n            }\r\n            options.mark = false;\r\n            //更新 pageSize pageNo的值\r\n            options.data.pno = options.page;\r\n            options.data.ps = options.pageSize;\r\n\r\n            //console.log(c.data);\r\n\r\n            $.ajax({\r\n                //global: c.global,\r\n                global: false,\r\n                url: options.url,\r\n                beforeSend: options.beforeSend,\r\n                complete: options.complete,\r\n                data: options.data,\r\n                type: options.type,\r\n                success: function (res) {\r\n                    if (res.error_code === 0) {\r\n                        //如果查询信息成功\r\n                        var pageCount = res.result.totalPage;\r\n                        var recordCount = pageCount * res.result.ps;\r\n                        options.pageCount = pageCount;   //一共多少页\r\n                        options.recordCount = recordCount;    //一共多少条数据\r\n                        options.pageSize = res.result.ps;    //当前页大小\r\n\r\n                        //执行callback\r\n                        options.success(res);\r\n                    } else {\r\n                        options.pageCount = 0;\r\n                        options.recordCount = 0;\r\n                        self.html(options.noData);\r\n                    }\r\n                    if (options.pageId.length) {\r\n                        ajaxPage.toPage();\r\n                        ajaxPage.toPageBind();\r\n                    }\r\n                    options.mark = true;\r\n\r\n                }\r\n            });\r\n        }\r\n\r\n        ajaxPage.get = function (i) {\r\n            if (!options.isLoad || !options.mark || options.pageCount < 1) {\r\n                return ajaxPage;\r\n            }\r\n            switch (i) {\r\n                case \"pre\":\r\n                    options.page--;\r\n                    break;\r\n                case \"next\":\r\n                    options.page++;\r\n                    break;\r\n                case \"first\":\r\n                    options.page = 1;\r\n                    break;\r\n                case \"last\":\r\n                    options.page = options.pageCount;\r\n                    break;\r\n                default :\r\n                    if (isNaN(i)) {\r\n                        break;\r\n                    }\r\n                    i = parseInt(i);\r\n                    if (i > options.pageCount) {\r\n                        i = options.pageCount;\r\n                    }\r\n                    if (i == options.page) {\r\n                        return false\r\n                    }\r\n\r\n                    options.page = i;\r\n                    break;\r\n            }\r\n            ajaxPage.ajax();\r\n            return self;\r\n        }\r\n\r\n        ajaxPage.toPageBind = function () {\r\n            var pId = options.pageId;\r\n            pId.find(\"a.a_pre\").click(function () {\r\n                ajaxPage.get(\"pre\");\r\n            });\r\n            pId.find(\"a.a_next\").click(function () {\r\n                ajaxPage.get(\"next\");\r\n            });\r\n            pId.find(\"a.a_first\").click(function () {\r\n                ajaxPage.get(\"first\");\r\n            });\r\n            pId.find(\"a.a_last\").click(function () {\r\n                ajaxPage.get(\"last\");\r\n            });\r\n            pId.find(\"a.a_href\").click(function () {\r\n                ajaxPage.get($(this).attr(\"data-i\"));\r\n            });\r\n            pId.find('input.a_text').keydown(function (e) {\r\n                if (e.keyCode === 13) {\r\n                    ajaxPage.get($.trim($(this).val()));\r\n                }\r\n            });\r\n            pId.find(\"input.a_button\").click(function () {\r\n                ajaxPage.get($.trim(pId.find('input.a_text').val()));\r\n            });\r\n        }\r\n\r\n        ajaxPage.toPage = function () {\r\n            var str = \"\";\r\n            if (options.recordCount > options.pageSize) {//如果总共页大小每页多少条则,否则不出现分页码\r\n                var page = options.page * 1,\r\n                    pageSize = options.pageSize * 1,\r\n                    i = 1,\r\n                    pageCount = options.pageCount;\r\n\r\n                if (page > 1) {\r\n                    str += \"<a href=\\\"javascript:;\\\" class=\\\"a_pre\\\">&lt; \\u4E0A\\u4E00\\u9875</a>\";\r\n                } else {\r\n                    str += \"<span class=\\\"disable\\\">&lt; \\u4E0A\\u4E00\\u9875</span>\";\r\n                }\r\n                ;\r\n\r\n                if (pageCount < 7) {\r\n                    for (i; i <= pageCount; i++) {\r\n                        if (page === i) {\r\n                            str += \"<span class=\\\"on\\\">\" + i + \"</span>\";\r\n                        } else {\r\n                            str += \"<a href=\\\"javascript:;\\\" class=\\\"a_href\\\" data-i=\\\"\" + i + \"\\\">\" + i + \"</a>\";\r\n                        }\r\n                    }\r\n                } else {\r\n                    var start, end;\r\n                    if (page === 1) {\r\n                        str += \"<span class=\\\"on\\\">1</span>\";\r\n                    } else {\r\n                        str += \"<a href=\\\"javascript:;\\\" class=\\\"a_first\\\">1</a>\";\r\n                    }\r\n                    \r\n                    if (page > 5) {\r\n                        str += \"<span class=\\\"dot\\\">...</span>\";\r\n                    }\r\n\r\n                    if (page < 6) {\r\n                        start = 1;\r\n                    } else {\r\n                        start = page - 3;\r\n                    }\r\n\r\n                    if (page > (pageCount - 5)) {\r\n                        end = pageCount;\r\n                    } else {\r\n                        end = page + 4;\r\n                    }\r\n\r\n                    for (var i2 = start; i2 < end; i2++) {\r\n                        if (i2 !== 1 && i2 !== pageCount) {//避免重复输出1和最后一页\r\n                            if (i2 === page) {\r\n                                str += \"<span class=\\\"on\\\">\" + i2 + \"</span>\";\r\n                            } else {\r\n                                str += \"<a href=\\\"javascript:;\\\" class=\\\"a_href\\\" data-i=\\\"\" + i2 + \"\\\">\" + i2 + \"</a>\";\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    if (page < (pageCount - 5)) {\r\n                        str += \"<span class=\\\"dot\\\">...</span>\";\r\n                    }\r\n\r\n                    if (page === pageCount) {\r\n                        str += \"<span class=\\\"on\\\">\" + pageCount + \"</span>\";\r\n                    } else {\r\n                        str += \"<a href=\\\"javascript:;\\\" class=\\\"a_last\\\">\" + pageCount + \"</a>\";\r\n                    }\r\n\r\n                }\r\n\r\n\r\n                if (page >= pageCount) {\r\n                    str += \"<span class=\\\"disable\\\">\\u4E0B\\u4E00\\u9875 &gt;</span>\";\r\n                } else {\r\n                    str += \"<a href=\\\"javascript:;\\\" class=\\\"a_next\\\">\\u4E0B\\u4E00\\u9875 &gt;</a>\";\r\n                }\r\n                ;\r\n                str += '<span class=\"href\"><label for=\"pageText\">\\u5230\\u7B2C</label><input autocomplete=\"off\" type=\"text\" class=\"a_text\" value=\"' + page + '\"><label for=\"pageText\">\\u9875</label><input type=\"button\" value=\"确定\" class=\"a_button\"></span>';\r\n\r\n                //左侧的菜单 pageSize 控制菜单\r\n            }\r\n            ;\r\n\r\n            options.pageId.html(str);\r\n            return ajaxPage;\r\n        }\r\n\r\n        //对外暴露接口\r\n        self.run = ajaxPage.run;\r\n        self.get = ajaxPage.get;\r\n        if (options.run) {\r\n            self.run();\r\n        }\r\n        return self;\r\n    }\r\n    $.fn.extend({ajaxPage: ajaxPage});\r\n})(jQuery);\r\n"]}